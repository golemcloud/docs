import { Callout } from "nextra/components"

# Setup Rust

Creating **Golem components** in **Rust** requires installing the latest stable compiler, enabling the WASM target and installing the supported version of `cargo-component`.

### Installing Rust

Use the [official guide](https://www.rust-lang.org/learn/get-started) to install the latest **stable** version of the Rust compiler.

<Callout type="info">
For MacOS the recommended way is using `rustup` by running the following installation script:

```shell
$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

</Callout>

### Enabling WebAssembly targets

With `rust` and `rustup` installed, the next step is to **enable the WebAssembly** support by running:

```shell
$ rustup target add wasm32-wasip1
```

To verify if this step was successful, run:

```shell
$ rustup target list --installed | grep wasm32-wasip1
wasm32-wasip1
```

### Installing `cargo-component`

The last step is installing the `cargo-component` extension for Rust's `cargo` build tool. This will enable a set of subcommands for `cargo` which allows compiling Rust projects into **WebAssembly components**, which are ready to be uploaded to **Golem**.

<Callout type="warning">
  Golem requires a **specific version** of `cargo-component`. Please make sure the correct version
  is installed with the commands described below.
</Callout>

Install the version `0.20.0` of `cargo-component` with `cargo` itself:

```shell
$ cargo install --force cargo-component@0.20.0
```

<Callout type="warning">
    There is a bug in one of `cargo-component`'s dependencies (`wit-component 0.220.0`), fixed by a patch release (`wit-component 0.220.1`). Make sure to NOT use `--locked` otherwise you get the wrong version of this dependency installed, which can lead to runtime errors regarding _misaligned pointer dereference_.
</Callout>

Verify that the correct version is installed:

```shell
$ cargo component --version
cargo-component-component 0.20.0 (2e497ee 2025-01-07)
```

Please refer [to the cargo-component website](http://github.com/bytecodealliance/cargo-component) for more information.
