# WASI HTTP Incoming handler

If you have a wasm component that exports the wasi:http/incoming-handler\@0.2.x world, you can easily deploy your application to Golem.
This tutorial will walk you through deploying such an application to Golem.

Let's assume that we have an application written in any supported language that implements the following world:

```wit
package golem:example;

world api {
  import wasi:http/types@0.2.3;
  export wasi:http/incoming-handler@0.2.3;
}
```

and we want to deploy this under the GET /api route on our domain.

The way we are going to do this using Golem is by defining an [api-definition](/concepts/api-definitions) with the http handler binding type.

## Building and uploading the component

The first step is to create a new Golem component implementing the incoming handler interface. Tthe `golem` command line interface contains templates for several supported languages, using the template name `wasi-http`.

For example to create one in Rust into a competely new application, use the following commands:

```shell copy
golem app new my-app rust
cd my-app
golem component new rust/wasi-http golem:example
```

Then build it using `golem app build`:

```shell copy
golem app build
```

The next step is to deploy the component to Golem:

```shell copy
golem app deploy
```

Once the component is uploaded, we need to take note of the component id (fd13822e-b8fd-4c58-a87a-909feeea63ec) and version (0), we'll need them in the next step.

## Defining the API

The next step is to define the api. This is done by writing an [api definition](/invoke/making-custom-apis) for our api.
For our example this would look like this:

```yaml
id: example-api
version: "0.1.0"
draft: true
routes:
  - method: Get
    path: "/api"
    binding:
      bindingType: http-handler
      componentId:
        componentId: "fd13822e-b8fd-4c58-a87a-909feeea63ec"
        version: 0
```

Save the above to a file 'api.yaml'.

## Uploading and deploying the API

Next the api needs to be uploaded and deployed to Golem. This can be done using the CLI with the following two commands:

1. This registers the api definition with Golem and makes it available for other commands:

   ```shell
   $ golem api definition add api.yaml

   {
     "id": "example-api",
     "version": "0.1.0",
     "routes": [
       {
         "method": "Get",
         "path": "/api",
         "security": null,
         "binding": {
           "componentId": {
             "componentId": "fd13822e-b8fd-4c58-a87a-909feeea63ec",
             "version": 0
           },
           "workerName": null,
           "idempotencyKey": null,
           "response": null,
           "bindingType": "http-handler",
           "responseMappingInput": null,
           "workerNameInput": {
             "types": {}
           },
           "idempotencyKeyInput": null,
           "corsPreflight": null,
           "responseMappingOutput": null
         }
       }
     ],
     "draft": true,
     "createdAt": "2025-01-29T19:31:54.328610228Z"
   }
   ```

2. Now we can deploy the api to our host (localhost in this example):

   ```shell
   $ golem api deployment deploy --definition example-api/0.1.0 --host localhost:9093

   {
     "apiDefinitions": [
       {
         "id": "example-api",
         "version": "0.1.0"
       }
     ],
     "site": {
       "host": "localhost:9093",
       "subdomain": null
     },
     "createdAt": "2025-01-29T19:31:54.369756Z"
   }
   ```

## Invoking the API

This concludes the process of uploading a component that implements the wasi:http/incoming-handler to Golem. The API is now being served
and will respond to http requests on the configure route.

```bash
http localhost:9093/api

"Hello, I'm a durable teapot."
```
